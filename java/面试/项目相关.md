# 个人

## 自我介绍

面试官您好，我叫宁柱，就读与湖北师范大学软件工程专业。在校期间，我系统学习了Java编程语言，打下了扎实的编程基础，并对JVM、JMM、JUC等知识也深入学习了一番。

在平时课程上深感学到的太少，于是在B站等平台中自学Java后端开发的相关专业知识，学习了Spring、SpringMVC、SpringBoot、mybatis、mybatisPlus、springCloud等主流开发框架技术和Mysql、Redis等数据库技术，以及一些常用中间件，如消息中间件的使用方法。并把它们用于实践中，比如参与课程组织的Java项目开发、还有自己也会从网上找一些项目练手，来从实践中检验自己是否真的学会了。我会把在实践中遇到的问题和解决方法记到笔记里，这样可以防止重蹈覆辙和便于下次快速解决相同的问题。

我做事认真负责，热爱编程开发，具备良好的编程习惯和代码规范意识，也喜欢学习新知识。我对前端和运维的一些知识也有这浓厚的兴趣，并且我深知作为一个后端开发，了解这方面的知识也是非常有必要的。于是也学习了js、Vue和ElementUI的使用，对docker、linux的常用命令也有一定的使用经验。

对于这次机会，我充满期待。我希望能够在一个具有挑战性和学习氛围的环境中，不断学习和成长。同时，我也愿意将所学应用到实际工作中，为公司的发展贡献自己的力量。

最后，感谢您和贵公司给我这次面试的机会。

## 对java后端的理解

“Java后端开发主要涉及使用Java编程语言和相关技术栈来构建、维护和优化服务器端的应用程序。在Java后端开发中，我们关注于实现业务逻辑、处理数据、构建API以及与前端或其他服务进行通信。

除了技术层面，Java后端开发者还需要关注性能优化、安全性、可维护性等方面。他们需要了解如何对应用程序进行性能测试和调优，如何保护应用程序免受攻击，以及如何编写易于理解和维护的代码。

在团队协作中，Java后端开发者需要与其他开发人员（如前端开发者、测试人员、数据库管理员等）紧密合作，共同完成项目开发和交付。他们需要具备良好的沟通能力、团队合作精神和解决问题的能力。

总之，Java后端开发是一个综合性很强的领域，需要开发者具备扎实的编程基础、丰富的技术栈和良好的团队协作能力。我相信通过不断学习和实践，我可以更好地胜任这个职位。”

## 人生规划

首先，在短期内，我计划通过实习期间的学习和实践，深入理解和掌握Java后端开发的核心知识和技术栈。我将努力提升自己的编程能力，学习并掌握更多先进的框架和工具，以便更好地应对实际开发中的各种问题。同时，我也将积极参与团队项目，通过实践来锻炼自己的团队协作和问题解决能力。

在中期规划方面，我希望能够在毕业后找到一份与Java后端开发相关的工作，并在这个领域里不断深耕。我计划在工作中积累经验，提升自己的专业能力和职业素养，争取在几年内成为一名优秀的Java后端开发工程师。同时，我也将关注行业动态和技术发展趋势，不断学习和掌握新技术，以保持自己的竞争力。

在长远的人生规划中，我希望能够在Java后端开发领域取得一定的成就，并成为一名有影响力的技术专家或领导者。我将通过不断学习和实践，提高自己的技术水平和领导力，为团队和公司的发展做出贡献。同时，我也将关注个人成长和职业发展，寻找更多的机会和挑战，不断提升自己的综合素质和竞争力。

最后，我相信人生规划是一个动态的过程，需要不断地调整和完善。我将根据自己的实际情况和外部环境的变化，灵活地调整自己的规划，并努力实现自己的目标。我相信只要我保持积极的心态和不断的努力，就一定能够实现自己的人生规划。”

# 项目信息管理

## 报表统计

Apache POI是一个流行的API，用于创建和操作Microsoft Office格式的文件，包括Excel。它提供了两个主要组件：HSSF（用于操作Excel 97(-2007)格式）和XSSF（用于操作Excel 2007 OOXML格式）。在Maven项目中，你通常需要添加`poi`和`poi-ooxml`这两个依赖

EasyExcel是阿里巴巴开源的一个用于读写Excel的Java工具，它基于Apache POI，但解决了POI存在的一些内存和性能问题。EasyExcel可以方便地读写Excel文件，并且支持大数据量操作。

## stream

Redis消息队列实现方式：

- 基于List结构模拟：LPUSH 结合 RPOP、BRPOP或者BLPOP
	- 优点：
		* 利用Redis存储，不受限于JVM内存上限
		* 基于Redis的持久化机制，数据安全性有保证
		* 可以满足消息有序性

	- 缺点：

		* 无法避免消息丢失
		* 只支持单消费者
- 基于PubSub：2.0版本引入，费者可以订阅一个或多个channel，生产者向对应channel发送消息后，所有订阅者都能收到相关消息。
	- 优点：
		* 采用发布订阅模型，支持多生产、多消费

	- 缺点：
		* 不支持数据持久化
		* 无法避免消息丢失
		* 消息堆积有上限，超出时数据丢失
- 基于Stream： 5.0 引入，可以实现一个功能非常完善的消息队列。
	- XREAD命令特点
		- 消息可回溯
		- 一个消息可以被多个消费者读取
		- 可以阻塞读取
		- 有消息漏读的风险
	- XREADGROUP命令特点
		- 消息可回溯
		- 可以多消费者争抢消息，加快消费速度
		- 可以阻塞读取
		- 没有消息漏读的风险
		- 有消息确认机制，保证消息至少被消费一次

![image-20240517130239297](C:\Users\797799421\AppData\Roaming\Typora\typora-user-images\image-20240517130239297.png)

# 北大软件实习

## 主要工作

- 在leader的安排下，完成一些项目bug修复和新需求的实现
- 对使用公司内部代码质量检查工具（库博）分析出的问题进行解决
- 完成禅道上分配给自己的任务单（bug类型、新需求类型）
- 对客户和测试人员发现的bug进行解决
- 完成数据库（mysql、达梦、人大金仓）的备份工作
- 代码修改并测试完成后，提交到TFS上、并与相应分支进行代码的合并
	- 老项目需要把修改好的模块打成新Jar包，交给运维人员重新部署到测试环境（有时则是自己部署）
	- 新项目需要到登录到`jenkins`后，去重新构建一下修改的模块

## PAD模块

该模块主要的功能是筛选数据和导出相应的数据包，供领导在pad上查看政府部分的员工信息。

> 步骤：创建新分组 --> 指定分组包含哪些部门 --> 可以选择性的填入sql语句进行进一步筛选 --> 完成分组的创建
>
> 打数据包时，可以指定打哪个分组的数据包

## 东方人才库

完成“东方人才库”`人才履职模块`和统计分析中`图表分析`模块的开发工作

- 该平台用到了公司内部的低代码开发平台
- 人才履职模块：两个页面，人才履职跟踪和人才履职评价
	- 人才履职跟踪：可以创建项目/活动，指定参与的人员；创建好后可以继续查看、修改和回写
	- 人才履职评价：左侧是部门树，右边展示选中部门的人才信息；点击具体的人才，可以查看他参与过哪些项目/活动；并且可以对他进行评价
- 图表分析
	- 首页可根据多个条件（年龄分段、户籍、性别、学历等级、政治面貌、人才等级、获奖等级等）来查询人才库中的人才列表，并且可以下载相应的excel表格。
	- 点击图表分析则可以以不同指标作为维度，来查看人才分别的图表：有柱状图、折线图、表格等方式（echarts）

# 餐点通

## 简介

本项目是专门为餐饮企业（餐厅、饭店）定制的一款软件产品，包括 系统管理后台 和 小程序端应用 两部分。其中系统管理后台主要提供给餐饮企业内部员工使用，可以对餐厅的分类、菜品、套餐、订单、员工等进行管理维护，对餐厅的各类数据进行统计，同时也可进行来单语音播报功能。小程序端主要提供给消费者使用，可以在线浏览菜品、添加购物车、下单、支付、催单等。

## 项目模块

![image-20240517103742570](C:\Users\797799421\AppData\Roaming\Typora\typora-user-images\image-20240517103742570.png)

## JWT 

JWT（JSON Web Tokens）是一种开放标准（RFC 7519）的方法，用于在网络通信的双方之间安全地传输信息。这些信息可以是用户的身份、权限等，用于进行身份验证和授权。

由三部分组成：**Header（头部）**、**Payload（负载）**、**Signature（签名）**

1. **身份验证（Authentication）**：一旦用户通过登录认证，服务器就会生成一个 JWT 令牌并将其返回给客户端。客户端在后续的请求中携带这个令牌，以证明自己的身份。服务器可以解析 JWT 来验证用户的身份和权限。
2. **授权（Authorization）**：JWT 也可以用于授权。一旦用户身份被验证，每个后续的请求都将包含用户的 JWT，允许用户访问路由、服务和资源。服务器可以使用 JWT 中的信息来确定用户是否有权访问这些资源。
3. **无状态（Stateless）**：JWT 是无状态的，这意味着服务器不需要存储任何关于会话的信息。服务器只需要检查 JWT 中的签名是否有效，以及 JWT 中包含的信息是否允许用户访问所请求的资源。这大大简化了应用程序的设计和实现，并提高了系统的可扩展性和可靠性。
4. **跨域通信**：由于 JWT 令牌存储在客户端（通常是浏览器或移动应用），因此它可以轻松地在不同域之间进行通信。这使得 JWT 非常适合用于前后端分离、微服务架构和单点登录（SSO）等场景。

为什么使用它：

1. **安全性**：JWT 使用签名来确保令牌未被篡改，并使用加密算法来保护令牌中的敏感信息。这使得 JWT 成为一种相对安全的方法来传输用户信息。
2. **可扩展性**：JWT 令牌可以包含任何类型的信息，这使得它非常灵活和可扩展。您可以将用户的角色、权限、用户ID等信息嵌入到 JWT 令牌中，以便在服务器端进行身份验证和授权。
3. **可移植性**：JWT 是一种开放标准，可以在各种编程语言和框架中使用。这使得 JWT 成为一种跨平台的解决方案，可以轻松地将应用程序从一个平台迁移到另一个平台。
4. **减少服务器存储压力**：由于 JWT 令牌存储在客户端，服务器不需要存储任何关于会话的信息。这大大减少了服务器的存储压力，并提高了系统的可扩展性。
5. **支持跨域请求**：在前后端分离的应用程序中，JWT 可以轻松地支持跨域请求。客户端只需要在请求头中包含 JWT 令牌，就可以访问不同域名的服务器资源。

## SpringCache

本项目中集成Redis用于存储餐品消息等，提供用户访问速度。

pring Cache是Spring提供的一种缓存抽象机制，旨在简化应用中的缓存操作。

- 声明式缓存：通过在方法上添加注解（如@Cacheable、@CachePut、@CacheEvict等）来声明缓存的行为，无需手动编写缓存代码。
- 扩展性：Spring Cache提供了抽象层，使得我们可以根据需要切换不同的缓存实现。

注解：

SpEL（Spring Expression Language）来动态生成键，例如通过`#`可以获取参数。

| **注解**       | **说明**                                                     |
| -------------- | ------------------------------------------------------------ |
| @EnableCaching | 开启缓存注解功能，通常加在启动类上                           |
| @Cacheable     | 在方法执行前先查询缓存中是否有数据，如果有数据，则直接返回缓存数据；如果没有缓存数据，调用方法并将方法返回值放到缓存中 |
| @CachePut      | 将方法的返回值放到缓存中                                     |
| @CacheEvict    | 将一条或多条数据从缓存中删除                                 |

## SprignTask

本项目中用于定时更改订单状态。

Spring Task 是Spring框架提供的任务调度工具，可以按照约定的时间自动执行某个代码逻辑。

它是定时任务框架，作用是定时自动执行某段Java代码。

**cron表达式**其实就是一个字符串，通过cron表达式可以**定义任务触发的时间**

**构成规则：**分为6或7个域，由空格分隔开，每个域代表一个含义

每个域的含义分别为：秒、分钟、小时、日、月、周、年(可选)

## Webscoket

为什么使用websocket：

- 比HTTP请求方式更实时，HTTP是请求-响应式的。	
	- 1.1支持长连接，但仍是单向的，消耗资源依然比较大

- 它是双向通信的，当消费者下单或催单时，商家可以实时告诉消费者配送状态。
- 它是一个持久性的连接，不需要每次发送消息时都重新建立连接，能减少网络开销。

特点：

1. 实时性：WebSocket提供了实时、双向的通信机制，可以确保一旦订单状态或催单请求发生变化，商家就能立即收到通知。而HTTP请求是客户端-服务器模式的请求-响应协议，主要用于获取Web页面或资源，不太适合需要实时通知的场景。
2. 双向通信：WebSocket允许客户端和服务器之间进行双向通信，这意味着商家也可以主动向用户发送消息，如订单确认、配送进度等。而HTTP请求则是单向的，只能由客户端发起请求，服务器返回响应。
3. 持久连接：WebSocket通过建立一个持久连接来实现通信，不需要每次都发送请求和接收响应，这可以大大减少网络延迟和带宽消耗。而HTTP请求在每次通信后都需要断开连接，这会增加网络负担和延迟。

## Apache POI

本项目用于导出订单数量等统计数据。

Apache POI是Apache软件基金会开发的一款开源Java库，用于处理Microsoft Office格式的文档，包括Excel、Word、PowerPoint等。

1. **全面支持**：Apache POI库支持多种Microsoft Office格式，包括Excel、Word和PowerPoint等。
2. **功能丰富**：Apache POI库提供了广泛的API，可以进行文档的读取、写入、编辑、格式化等操作。
3. **跨平台**：Apache POI库是基于Java开发的，可以在各种平台上使用。

作用：

- **报表生成**：使用Apache POI，你可以根据数据库中的数据生成Excel报表。
- **数据导入导出**：你可以使用Apache POI将Excel文件中的数据导入到数据库中，或者将数据库中的数据导出到Excel文件中。
- **模板生成**：你可以使用Apache POI创建Word或PowerPoint的模板，并根据需要动态填充数据。
- **自动化办公流程**：你可以使用Apache POI编写Java程序来自动处理办公文档，如批量转换文件格式、自动发送邮件等。

模块：

- **HSSF**：提供读写Microsoft Excel XLS格式档案的功能。
- **XSSF**：提供读写Microsoft Excel OOXML XLSX格式档案的功能。
- **HWPF**：提供读写Microsoft Word DOC格式档案的功能。
- **HSLF**：提供读写Microsoft PowerPoint格式档案的功能。
- **HDGF**：提供读Microsoft Visio格式档案的功能。
- **HPBF**：提供读Microsoft Publisher格式档案的功能。
- **HSMF**：提供读Microsoft Outlook格式档案的功能。

# 网上预约挂号系统

网上预约挂号是近年来开展的一项便民就医服务，旨在缓解看病难、挂号难的就医难题，许多患者为看一次病要跑很多次医院，最终还不一定能保证看得上医生。网上预约挂号全面提供的预约挂号业务从根本上解决了这一就医难题。随时随地轻松挂号！不用排长队！

## mongoDB

**数据模型与存储方式**：

- MongoDB是一个基于分布式文件存储的开源NoSQL数据库系统，它使用文档导向的数据模型。数据以文档的形式存储，每个文档类似于JSON对象，由键值对组成，且字段值可以包含其他文档、数组等复杂数据类型。
- MongoDB是无模式的（Schemaless），意味着不需要预定义文档的结构。每个文档可以有不同的字段和结构，这使得数据模型更加灵活。

**特点**：

- **分布式存储**：MongoDB可以在多个服务器上进行部署，实现数据的分布式存储和横向扩展。
- **丰富的查询语言**：MongoDB提供了灵活的查询功能，支持条件查询、范围查询、正则表达式、聚合管道等。
- **支持事务**：从版本4.0开始，MongoDB支持事务，可以在单个文档或多个文档上执行原子性的读写操作。
- **高效的数据存储**：MongoDB使用BSON（Binary JSON）格式存储数据，这是一种在JSON基础上增加了类型及元数据描述的二进制格式，提高了存储和扫描效率。

**应用场景**：

- MongoDB适用于实时分析、大数据处理、物联网应用、实时应用和通信、内容管理系统（CMS）以及用户数据和个性化推荐等场景。

# 客户关系管理系统

该系统集营销与销售于一体的 CRM 系统，利用信息化与数字化手段管理客户与营销活动。构建以客户 为核心的信息化管理平台，旨在提升市场营销、销售及服务效率与效益。 

> CRM 系统：客户关系管理系统（Customer Relationship Management System），是一种通过使用技术和流程来有效管理和维护与客户之间关系的方法。

技术栈：Vue3+Element-Plus、SpringBoot、SpringSecurity、MyBatis、MySQL、Redis、Lombok、JWT。 

关键点： 

- 使用 SpringSecurity 实现系统的认证授权，采用 BCrypt 加密算法对密码进行加密。 
- 数据权限：通过 AOP+自定义注解给 SQL 语句加上过滤条件，从而根据不同角色/用户实现数据过滤的效果。 
- 菜单权限：前端通过后端返回的权限列表动态渲染页面菜单，从而实现不同用户登录时，看到不同的菜单。 
- 功能/操作权限：数据库中的功能权限表中存储了权限和其对应的标识符等数据，使用 SpringSecurity 在用户登 录时获取该用户的功能权限列表，并通过其提供的权限注解给具体的 API 接口加上权限校验，从而让用户无法越 权操作；前端通过 Vue 的自定义指令和后端返回的功能权限列表实现按钮的动态渲染，让没有相关操作权限的用 户无法看到相应的操作按钮。

# 商城系统

本系统分为后台管理系统和微信小程序两个终端，后台管理系统主要是对商城业务的支撑，核心功能包 括系统管理、产品管理、类目管理、商品属性管理、商品分组标签管理、公告管理、轮播图管理、地址管理。微信 小程序端的核心功能包括首页展示、商品分类展示、商品详情页面、购物车页面。 

技术栈：SpringCloudAlibaba、Redis、MySQL、SpringSecurity、JWT、RabbitMQ、Springfox、Validator。 

关键点： 

- 基础服务设施模块负责管理认证授权服务和网关服务，common 模块负责管理项目需要的常量类、通用实体类 和存放业务模块中的公共内容，business 模块用于管理商城系统的所有业务模块。 
- 使用 Springfox 结合 Apifox Helper 插件自动生成接口文档并上传到 Apifox 上，方便团队协作和文档的维护。 
- 使用 Mybatis 插件根据数据库表生成代码，并使用通义灵码 AI 插件辅助开发，提高开发效率。 
- 使用 MP 的乐观锁插件结合版本号字段保证并发写时数据的安全性。 
- 网关模块通过 token 统一进行认证授权，并对 token 进行续签。
- 使用 Feign 拦截器解决 token 服务间传递问题，并结合 Sentinel 实现对远程服务调用时的熔断降级。 
- 通过延迟队列和死信队列对超时的订单进行处理，如果超时订单未支付，需要修改订单状态和回滚数据

# 智汇学堂

## 介绍

是一款专门针对成人职业技能教育的网络课堂系统，网站提供了成人职业技能培训的相关课程，如：软件开发培训、职业资格证书培训、成 人学历教育培训等课程。

项目基于 B2B2C 的业务模式，培训机构可以在平台入驻、发 布课程，我们公司作为运营方由专门的人员对发布的课程进行审核，审核通过后课程 才可以发布成功，课程包括免费和收费两种形式，对于免费课程普通用户可以直接选 课学习，对于收费课程在选课后需要支付成功才可以继续学习。

本项目包括用户端、机构端、运营端三个端。

核心模块包括：内容管理、媒资管理、课程搜索、订单支付、选课管理、认证授权 等。

本项目采用前后端分离架构，后端采用 SpringBoot、SpringCloud 技术栈开发，数据 库使用了 MySQL，还使用了 Redis、消息队列、分布式文件系统、Elasticsearch 等中 间件系统。

## B2B2C

B2B2C的业务模式，是一种融合了B2B（企业对企业）和B2C（企业对消费者）的电子商务模式。在这种模式下，一个电子商务平台不仅连接了供应商和消费者，还扮演了中间服务提供者的角色。

## 索引同步

课程信息是先保存在关系数据库中，而后再写入索引，这个过程是将关系数据中的数据同步到 elasticsearch 索引中的过程，称为索引同步。

根据本项目的需求，课程发布后信息同步的实时性要求不高，从提交审核到发布成功 一般两个工作日完成。综合比较以上技术方案本项目的索引同步技术使用任务调度的 方法。

通常项目中使用 elasticsearch 需要完成索引同步，索引同步的方法很多：

- 针对实时性非常高的场景需要满足数据的及时同步，可以同步调用，或使用 Canal 去实现。

	> canal 主要用途是基于 MySQL 数据库增量日志解析，并能提供增量数据订阅和消费，实现将 MySQL 的数据同步到消息队列、Elasticsearch、其它数据库等，应用场 景十分丰富。

	- 同步调用即在向 MySQL 写数据后远程调用搜索服务的接口写入索引，此方法简单 但是耦合代码太高。
	- 可以使用一个中间的软件 canal 解决耦合性的问题，但存在学习与维护成本。

- 当索引同步的实时性要求不高时可用的技术比较多，比如：MQ、Logstash、任务调度等。

	- MQ：向 mysql 写数据的时候向 mq 写入消息，搜索服务监听 MQ，收到消息后写入索 引。使用 MQ 的优势是代码解耦，但是需要处理消息可靠性的问题有一定的技术成 本，做到消息可靠性需要做到生产者投递成功、消息持久化以及消费者消费成功三个 方面，另外还要做好消息幂等性问题。
	- Logstash： 开源实时日志分析平台 ELK 包括 Elasticsearch、Kibana、Logstash， Logstash 负责收集、解析和转换日志信息，可以实现 MySQL 与 Elasticsearch 之间的 数据同步。也可以实现解耦合并且是官方推荐，但需要增加学习与维护成本。
	- 任务调度：向 mysql 写数据的时候记录修改记录，开启一个定时任务根据修改记录将 数据同步到 Elasticsearch。

流程：

1. 课程发布向消息表插入记录。
2. 由任务调度程序通过消息处理 SDK 对消息记录进行处理。 
3. 向 elasticsearch 索引中保存课程信息。 
	1. 由内容管理服务远程调用搜索服务添加课程信息索引。
	2. 搜索服务再请求 elasticsearch 向课程索引中添加文档。

## Knife4j

Knife4j（原名Swagger-Bootstrap-UI）是一个为Java MVC框架集成Swagger生成API文档的增强解决方案。它基于Swagger实现，旨在为Java开发者提供生成、展示和调试API文档的功能。

与swagger有什么不同：

- 改进了界面，使其更美观和方便使用。
- 增强了功能，如接口分组、参数设置、支持导出文档等。

## Validation

spring-boot-starter-validation，它提供了对Java Bean验证（Bean Validation）的支持。

1. **支持JSR 303验证规范**：Validation依赖基于Java标准化的JSR 303验证规范，提供了对Bean验证（Bean Validation）功能的支持。这意味着您可以使用注解（如`@NotNull`、`@Size`、`@Pattern`等）对Java Bean的属性进行验证，以确保数据的有效性。也可以自定义验证规则。
2. **提高代码可读性**：通过使用Validation依赖，您可以将复杂的验证逻辑从业务代码中分离出来，使得代码更加清晰、易读。同时，验证注解的使用也使得验证规则更加直观和易于理解。
3. **增强数据安全性**：Validation依赖在数据入库之前对输入数据进行验证，确保数据的合法性和有效性。这有助于防止恶意输入和攻击，提高系统的安全性。

## freemarker

本项目中用于生成课程页面的静态html文件，提高用户访问速度。

FreeMarker的主要功能是将数据与模板进行结合，然后输出所需的结果。它被广泛应用于Java Web框架中，如Spring MVC、Struts、Play等。其特点包括：

1. 简单易用：FreeMarker使用简洁的语法和标签，使模板设计和使用变得简单易懂。它支持常见的逻辑判断、循环和变量赋值等操作，使得模板编写更加灵活和可读性更强。
2. 独立性：FreeMarker是一个独立的模板引擎，不依赖于特定的Web框架或容器。这使得它在各种Java应用中都可以方便地使用，无论是基于Web的应用还是独立的命令行工具。
3. 跨平台支持：由于FreeMarker是基于Java开发的，所以它可以运行在几乎所有支持Java的平台上，包括Windows、Linux、Mac等。
4. 强大的模板功能：FreeMarker提供了丰富的模板功能，包括条件语句、循环语句、宏定义等。这些功能使得模板可以更加灵活和强大地处理数据。

## xxl-job

本项目用于处理视频转码的耗时任务，以及对于课程发布存在的分布式事务问题进行定时任务调度来解决。

保证任务不被重复执行：

- 通过数据库锁来锁定于任务相关的数据。
- 给任务一个唯一ID，若ID已被使用，则放弃执行。
- 将任务设计为幂等的，即多次执行相同的任务不会产生副作用，可以使用幂等方案
	- 分布式锁：如redis的锁、zookeeper的临时顺序节点

- 如果是MQ，使用内部机制保证消息只被消费一次。

xxl-job是一款开源的分布式任务调度框架，主要用于解决大规模分布式任务的调度和执行问题。

1. **分布式任务调度**：xxl-job支持将任务分发到多个执行器节点上并行执行，有效利用集群资源，提高任务执行效率和并发能力。
2. **任务调度方式**：支持多种任务调度方式，包括简单定时任务、CRON表达式任务、固定间隔任务等。通过配置调度策略和触发器，可以实现任务的定时调度、循环调度等。
3. **动态任务管理**：xxl-job支持动态添加、删除和修改任务，可以根据业务需求灵活调整任务的执行计划和参数配置，无需重启应用即可生效。
4. **任务执行监控**：提供了任务执行日志和状态监控功能，可以实时查看任务的执行情况、成功率、耗时等指标，方便进行任务调优和故障排查。
5. **任务执行方式**：支持多种任务执行方式，包括Java、Shell脚本、Python脚本等，可以灵活执行各种类型的任务。
6. **Web管理界面**：xxl-job提供了一个基于Web的管理界面，方便用户查看和管理任务、日志、执行器等信息。
7. **可扩展性**：提供了丰富的扩展点和插件机制，可以根据需要自定义任务执行器、日志存储、报警策略等功能。
8. **高可用性和负载均衡**：通过分布式锁和任务分片等机制，保证任务调度的高可用和负载均衡，避免单点故障和资源竞争问题。

## 分布式事务

课程发布时，需要写数据到mysql、redis、ES、MinIO中。由于已经有了任务调度的技术积累，而引入其他的技术会导致架构变复杂，增加学习成本和维护成本，所以最终使用**定时调度+消息表**的方式去异步向redis、ES、MinIO写入数据。

## springSecurity

基于当前研究的 Spring Security 认证流程如何支持多样化的认证方式呢？ 

- 支持账号和密码认证 采用 OAuth2 协议的密码模式即可实现。 
- 支持手机号加验证码认证 用户认证提交的是手机号和验证码，并不是账号和密码。 
- 微信扫码认证 基于 OAuth2 协议与微信交互，学成在线网站向微信服务器申请到一个令牌，然后携 带令牌去微信查询用户信息，查询成功则用户在学成在线项目认证通过

## 校验码

验证码可以防止恶性攻击，比如：XSS 跨站脚本攻击、CSRF 跨站请求伪造攻击，一 些比较复杂的图形验证码可以有效的防止恶性攻击。

> **XSS跨站脚本攻击（Cross-Site Scripting）是一种网络安全攻击方式**，攻击者通过在被攻击网站上注入恶意脚本，当用户浏览该网站时，恶意脚本会被执行，从而达到攻击用户的目的。攻击者可能利用XSS攻击来读取用户的cookie、token或其他敏感信息，进行钓鱼欺诈等恶意行为。
>
> **CSRF（Cross-site Request Forgery，跨站请求伪造）攻击是一种常见的Web攻击**，它利用用户在登录某个网站后的有效session来发送恶意请求。CSRF攻击的危害包括数据泄露、非法操作、拒绝服务以及传播CSRF蠕虫等。

为了保护系统的安全在一些比较重要的操作都需要验证码。

拿图片验证码举例： 

1. 先生成一个指定位数的验证码，根据需要可能是数字、数字字母组合或文字。
2. 根据生成的验证码生成一个图片并返回给页面 
3. 给生成的验证码分配一个 key，将 key 和验证码一同存入缓存。这个 key 和图片一 同返回给页面。
4. 用户输入验证码，连同 key 一同提交至认证服务。 
5. 认证服务拿 key 和输入的验证码请求验证码服务去校验
6. 验证码服务根据 key 从缓存取出正确的验证码和用户输入的验证码进行比对，如果 相同则校验通过，否则不通过

